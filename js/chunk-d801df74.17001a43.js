(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d801df74"],{1971:function(t,e,s){},"46a5":function(t,e,s){"use strict";var i,a,o,r,n,l,c,d,m,u,p,h,b,f,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"modal",staticClass:"modal fade",staticStyle:{"z-index":"11000"},attrs:{id:"exampleModal"}},[s("div",{staticClass:"modal-dialog modal-xl modal-dialog-centered"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header bg-primary"},[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("輪盤小遊戲")]),s("button",{staticClass:"btn-close",attrs:{type:"button"},on:{click:t.closeModal}})]),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"container d-lg-flex"},[s("div",{staticClass:"d-flex flex-column justify-content-center align-items-center"},[s("div",{staticClass:"wheelArea position-relative"},[s("button",{attrs:{type:"button",id:"spin_button",disabled:t.isRoll},on:{click:t.btnEvent}},[t._v(" 開始 ")]),s("canvas",{attrs:{id:"canvas"}})]),s("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:t.removerAll}},[t._v(" 移除全部 ")])]),s("table",{staticClass:"table table-striped table-hover align-middle"},[t._m(0),s("tbody",t._l(t.points,(function(e,i){return s("tr",{key:i},[s("th",{staticClass:"text-center"},[t._v(t._s(i+1))]),s("td",[t._v(t._s(e.name))]),s("td",[s("button",{staticClass:"btn btn-danger btn-sm text-white",attrs:{type:"button"},on:{click:function(s){return t.removerPoint(e.key)}}},[t._v(" 移除 ")])])])})),0)])])]),t._m(1)])])])},g=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"text-center"},[t._v("編號")]),s("th",[t._v("景點名稱")]),s("th")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[t._v(" 關閉 ")])])}],y=(s("cb29"),s("b0c0"),s("b64b"),s("d3b7"),s("159b"),s("7c2b")),w=s.n(y),C={data:function(){return{modal:"",points:[],isRoll:!1}},inject:["emitter"],methods:{init:function(){i=document.getElementById("canvas"),i.width=350,i.height=350,a=i.getContext("2d"),o=125,r=0,n=90,l=i.width/2,c=i.height/2,d=0,m=2*Math.PI/this.points.length,u=4e3,p=10,h=0},easeOut:function(t,e,s,i){return(t/=i/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e},drawRouletteWheel:function(){a.clearRect(0,0,i.width,i.height);for(var t=0;t<this.points.length;t++){var e=d+m*t,s=e+m;a.save(),t%3===0?a.fillStyle="#B6CCA1":t%3===1?a.fillStyle="#6D98BA":t%3===2&&(a.fillStyle="#77ACA2"),a.beginPath(),a.arc(i.width/2,i.height/2,o,e,s,!1),a.arc(i.width/2,i.height/2,r,s,e,!0),a.fill(),a.restore(),a.save(),a.font="bold 16px Helvetica, Arial",a.fillStyle="#000",a.translate(l+Math.cos(e+m/2)*n,c+Math.sin(e+m/2)*n),a.rotate(e+m/2+Math.PI/2),a.fillText(t+1,-a.measureText(t+1).width/2,0),a.restore()}a.save(),a.beginPath(),a.moveTo(l,c-o+8),a.lineTo(l-10,c-o),a.lineTo(l-4,c-o),a.lineTo(l-4,c-o-10),a.lineTo(l+4,c-o-10),a.lineTo(l+4,c-o),a.lineTo(l+10,c-o),a.closePath(),a.fill(),a.restore()},rotateWheel:function(){var t=this;if(this.isRoll=!0,h+=20,h>=b)return this.closeModal(),this.$swal.fire({title:"轉到 ".concat(this.getValue()," 囉"),showCancelButton:!0,confirmButtonText:"開啟輪盤",cancelButtonText:"關閉"}).then((function(e){e.isConfirmed&&t.openModal()})),void(this.isRoll=!1);var e=(f-this.easeOut(h,0,f,b))*(Math.PI/180);d+=e,this.drawRouletteWheel(),window.requestAnimationFrame(this.rotateWheel)},getValue:function(){var t=180*d/Math.PI,e=180*m/Math.PI,s=90,i=(t+s)%360,a=360-i,o=Math.floor(a/e);return this.points[o].name},btnEvent:function(){console.log("點到ㄌ"),h=0,b=3*Math.random()+u,f=10*Math.random()+p,this.rotateWheel()},openModal:function(){this.modal.show()},closeModal:function(){this.modal.hide()},getPoints:function(){var t=this;this.points=[];var e=Object.keys(localStorage);e.forEach((function(e){t.points.push({key:e,name:localStorage.getItem(e)})}))},removerPoint:function(t){localStorage.removeItem(t),this.emitter.emit("push-message",{style:"primary",title:"移除輪盤項目結果",content:"已從輪盤中移除"}),this.getPoints(),this.init(),this.drawRouletteWheel()},removerAll:function(){localStorage.clear(),this.emitter.emit("push-message",{style:"danger",title:"移除輪盤項目結果",content:"已全部清除"}),this.closeModal(),this.getPoints(),this.init(),this.drawRouletteWheel()}},mounted:function(){this.modal=new w.a(this.$refs.modal)}},_=C,x=(s("e103"),s("2877")),k=Object(x["a"])(_,v,g,!1,null,null,null);e["a"]=k.exports},"4f85":function(t,e,s){},7390:function(t,e,s){"use strict";s("4f85")},"81d5":function(t,e,s){"use strict";var i=s("7b0b"),a=s("23cb"),o=s("07fa");t.exports=function(t){var e=i(this),s=o(e),r=arguments.length,n=a(r>1?arguments[1]:void 0,s),l=r>2?arguments[2]:void 0,c=void 0===l?s:a(l,s);while(c>n)e[n++]=t;return e}},"8ac8":function(t,e,s){"use strict";s("bdfd")},b0c0:function(t,e,s){var i=s("83ab"),a=s("5e77").EXISTS,o=s("e330"),r=s("9bf2").f,n=Function.prototype,l=o(n.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=o(c.exec),m="name";i&&!a&&r(n,m,{configurable:!0,get:function(){try{return d(c,l(this))[1]}catch(t){return""}}})},b0c9:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("nav",{staticClass:"navbar navbar-expand-lg navbar-dark header"},[i("div",{staticClass:"container"},[i("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[i("img",{staticClass:"logoImg",attrs:{src:s("b32b"),alt:""}})]),t._m(0),i("div",{staticClass:"collapse navbar-collapse justify-content-end",attrs:{id:"navbarSupportedContent"}},[i("div",{staticClass:"navbar-nav text-sm-center"},[i("router-link",{staticClass:"nav-item nav-link mx-2 d-flex justify-content-center",attrs:{to:"/"}},[t._v("首頁")]),t.isMember?t._e():i("router-link",{staticClass:"nav-item nav-link mx-2 d-flex justify-content-center",attrs:{to:"/memberSignUp"}},[t._v("會員註冊")]),t.isMember?t._e():i("router-link",{staticClass:"nav-item nav-link mx-2 d-flex justify-content-center",attrs:{to:"/memberLogin"}},[t._v("會員登入")]),i("a",{staticClass:"nav-item nav-link mx-2 d-flex justify-content-center",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openRouletteModal.apply(null,arguments)}}},[t._v("隨機輪盤")]),i("div",{staticClass:"dropdown"},[t._m(1),i("ul",{staticClass:"dropdown-menu dropdown-menu-end py-0 right-0",attrs:{"aria-labelledby":"navbarDropdown"}},[i("li",[i("a",{staticClass:"dropdown-item text-white py-2 border-bottom border-1 border-primary d-flex justify-content-center",attrs:{href:"/shops/all"},on:{click:function(e){return e.preventDefault(),t.getAllShops.apply(null,arguments)}}},[t._v("全部商家")])]),i("li",[i("a",{staticClass:"dropdown-item text-white py-2 border-bottom border-1 border-primary d-flex justify-content-center",attrs:{href:"/shops/all"},on:{click:function(e){return e.preventDefault(),t.getTypeShops("bar")}}},[t._v("酒吧")])]),i("li",[i("a",{staticClass:"dropdown-item text-white py-2 border-bottom border-1 border-primary d-flex justify-content-center",attrs:{href:"/shops/desserts"},on:{click:function(e){return e.preventDefault(),t.getTypeShops("dessert")}}},[t._v("咖啡甜點")])]),i("li",[i("a",{staticClass:"dropdown-item text-white py-2 border-bottom border-1 border-primary d-flex justify-content-center",attrs:{href:"/shops/snacks"},on:{click:function(e){return e.preventDefault(),t.getTypeShops("snack")}}},[t._v("小吃宵夜")])]),i("li",[i("a",{staticClass:"dropdown-item text-white py-2 border-bottom border-1 border-primary d-flex justify-content-center",attrs:{href:"/shops/nightviews"},on:{click:function(e){return e.preventDefault(),t.getTypeShops("viewpoint")}}},[t._v("夜間景點")])])])]),t.isMember?i("div",{staticClass:"dropdown"},[t._m(2),i("ul",{staticClass:"dropdown-menu dropdown-menu-end py-0 right-0 bg-dark text-sm-center",attrs:{"aria-labelledby":"navbarDropdown"}},[i("li",[i("router-link",{staticClass:"dropdown-item text-white py-2 border-bottom border-1 border-primary d-flex justify-content-center",attrs:{to:"/member/memberInfo"}},[t._v("會員資料")])],1),i("li",[i("router-link",{staticClass:"dropdown-item text-white py-2 border-bottom border-1 border-primary d-flex justify-content-center",attrs:{to:"/member/favorites"}},[t._v("我的最愛")])],1),i("li",[i("router-link",{staticClass:"dropdown-item text-white py-2 border-bottom border-1 border-primary d-flex justify-content-center",attrs:{to:"/member/reviews"}},[t._v("分享紀錄")])],1),i("li",[i("router-link",{staticClass:"dropdown-item text-white py-2 border-bottom border-1 border-primary d-flex justify-content-center",attrs:{to:"/member/routes"}},[t._v("行程規劃")])],1)])]):t._e(),t.isMember?i("a",{staticClass:"nav-item nav-link mx-2 d-flex justify-content-center",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.logout.apply(null,arguments)}}},[t._v("會員登出")]):t._e()],1)])],1)]),i("Roulette",{ref:"modal"})],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent"}},[s("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"nav-link dropdown d-flex justify-content-center align-items-center mx-2",attrs:{href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}},[t._v(" 主題頁面"),s("span",{staticClass:"material-icons"},[t._v(" expand_more ")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"nav-link dropdown d-flex justify-content-center align-items-center mx-2",attrs:{href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}},[t._v(" 功能選單"),s("span",{staticClass:"material-icons"},[t._v(" expand_more ")])])}],o=(s("b64b"),s("46a5")),r={props:["isMember"],data:function(){return{}},components:{Roulette:o["a"]},methods:{logout:function(){var t=this;document.cookie="memberToken=; expires=; path=/",document.cookie="memberID=; expires=; path=/",this.$swal.fire({icon:"success",title:"已登出，將回到首頁",showConfirmButton:!1,timer:1500}),setTimeout((function(){"/"==t.$router.history.current.fullPath?t.$router.go(0):t.$router.push("/")}),1e3)},getAllShops:function(){"/shops/all"!==this.$router.history.current.fullPath?(this.$router.push("/shops/all"),this.$emit("get-all-shops")):this.$emit("get-all-shops")},getTypeShops:function(t){"/shops/all"!==this.$router.history.current.fullPath&&(this.$router.push("/shops/all"),this.$emit("get-type-shops",t),console.log("觸發")),this.$emit("get-type-shops",t)},openRouletteModal:function(){var t=Object.keys(localStorage);t.length<1?this.showAlert():(this.$refs.modal.getPoints(),this.$refs.modal.init(),this.$refs.modal.drawRouletteWheel(),this.$refs.modal.openModal())},showAlert:function(){this.$swal.fire({icon:"info",title:"請至少加入 2 個景點"})}}},n=r,l=(s("8ac8"),s("2877")),c=Object(l["a"])(n,i,a,!1,null,null,null);e["a"]=c.exports},b32b:function(t,e,s){t.exports=s.p+"img/logo_full.4cb5b812.svg"},bb51:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("FrontNavbar",{attrs:{isMember:t.isMember}}),s("div",{staticClass:"container-fuild"},[s("loading",{attrs:{active:t.isLoading,loader:"spinner",color:t.loader.color,width:t.loader.width,height:t.loader.height,"lock-scroll":t.loader.lockScroll,"is-full-page":t.loader.isFullPage}}),s("section",{staticClass:"container-fuild"},[s("div",{staticClass:"banner d-flex align-items-center"},[s("div",{staticClass:"container mb-0 mt-3 mb-md-4"},[s("h1",{staticClass:"text-primary fw-bold"},[t._v("好夜台南")]),s("p",{staticClass:"fs-3 text-primary"},[t._v("美好夜晚，盡在台南")]),s("router-link",{staticClass:"btn btn-light me-3",attrs:{to:"/shops/all"}},[t._v(" 更多內容 "),s("span",{staticClass:"material-icons align-middle fs-6"},[t._v(" arrow_forward ")])])],1)])]),s("section",{staticClass:"container-fuild py-6"},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col height-50"},[s("h2",{staticClass:"text-dark text-center fw-bold mb-3"},[t._v("地圖查詢")]),s("LeafletComponent")],1)])])]),s("section",{staticClass:"container-fuild bg-dark py-6"},[s("div",{staticClass:"container"},[s("h2",{staticClass:"text-center text-primary mb-3"},[t._v("熱門商家")]),s("Swiper",{attrs:{"member-id":t.review.MemberID},on:{"open-modal":t.openRouteModal}})],1)]),s("section",{staticClass:"container py-6",attrs:{id:"review"}},[s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-10 col-md-6 col-lg-5"},[s("h3",{staticClass:"h2 text-center"},[t._v("意見回饋")]),t.isMember?s("form",{ref:"form",attrs:{action:"#"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.review.MemberID,expression:"review.MemberID"}],attrs:{type:"hidden",name:"memberID",id:"memberID"},domProps:{value:t.review.MemberID},on:{input:function(e){e.target.composing||t.$set(t.review,"MemberID",e.target.value)}}}),s("div",{staticClass:"mb-3"},[s("label",{staticClass:"form-label",attrs:{for:"memberEmail"}},[t._v("會員名稱")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.memberName,expression:"memberName"}],staticClass:"form-control",attrs:{type:"text",id:"memberAccount",name:"memberAccount",disabled:""},domProps:{value:t.memberName},on:{input:function(e){e.target.composing||(t.memberName=e.target.value)}}})]),s("div",{staticClass:"mb-3"},[s("label",{staticClass:"form-label",attrs:{for:"type"}},[t._v("類別")]),s("span",{staticClass:"text-danger ms-2"},[t._v("必填")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.review.Type,expression:"review.Type"}],staticClass:"form-select",attrs:{name:"type",id:"type"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.review,"Type",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("請選擇類別")]),s("option",{attrs:{value:"推薦商家"}},[t._v("推薦商家")]),s("option",{attrs:{value:"店家資訊更新"}},[t._v("店家資訊更新")]),s("option",{attrs:{value:"系統回饋"}},[t._v("系統錯誤回饋")]),s("option",{attrs:{value:"其他"}},[t._v("其他")])])]),s("div",{staticClass:"mb-3"},[s("label",{staticClass:"form-label",attrs:{for:"reviewContent"}},[t._v("留言")]),s("span",{staticClass:"text-danger ms-2"},[t._v("必填")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.review.RContent,expression:"review.RContent"}],staticClass:"form-control",attrs:{name:"reviewContent",id:"reviewContent",cols:"20",rows:"5"},domProps:{value:t.review.RContent},on:{input:function(e){e.target.composing||t.$set(t.review,"RContent",e.target.value)}}})]),s("div",{staticClass:"form-floating mb-3 text-center"},[s("button",{staticClass:"btn btn-primary btn-lg w-25",attrs:{type:"submit",disabled:t.isDisabled},on:{click:function(e){return e.preventDefault(),t.addWebsiteReview.apply(null,arguments)}}},[t._v(" 送出 "),t.isDisabled?s("span",{staticClass:"spinner-grow spinner-grow-sm"}):t._e()])])]):s("div",{staticClass:"d-flex flex-column align-items-center"},[s("h5",[t._v("登入即可留言")]),s("router-link",{staticClass:"btn btn-primary text-center",attrs:{to:"/memberlogin"}},[t._v("按此登入")])],1)])])])],1),s("FrontFooter"),s("Roulette",{ref:"modal"}),s("RouteModal",{ref:"routeModal",attrs:{routes:t.memberRoutes,titles:t.memberRouteTitles,"shop-id":t.shopId},on:{"get-routes":t.getRoutes}})],1)},a=[],o=(s("ac1f"),s("5319"),s("d3b7"),s("159b"),s("b0c9")),r=s("d08d"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("l-map",{staticStyle:{height:"500px",width:"100%"},attrs:{zoom:t.zoom,center:t.center}},[s("l-control-layers",{attrs:{position:"topright"}}),t._l(t.tileProviders,(function(t){return s("l-tile-layer",{key:t.name,attrs:{name:t.name,visible:t.visible,url:t.url,attribution:t.attribution,"layer-type":"base"}})})),t._l(t.markers,(function(e,i){return s("l-marker",{key:i,attrs:{"lat-lng":e.point,icon:e.icon}},[s("l-popup",[t._v(" "+t._s(e.shopName)+" "),s("router-link",{attrs:{to:"shops/shop/"+e.shopID}},[t._v(" 點擊查看店家 ")])],1)],1)}))],2)],1)},l=[],c=s("e11e"),d=s("2699"),m=s("a40a"),u=s("4e2b"),p=s("f60f"),h=s("9ee8"),b={name:"CustomPath",components:{LMap:d["a"],LTileLayer:m["a"],LMarker:u["a"],LPopup:p["a"],LControlLayers:h["a"]},data:function(){return{tileProviders:[{name:"OpenStreetMap",visible:!1,attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},{name:"OpenDarkMap",visible:!0,url:"https://{s}.tile.jawg.io/jawg-matrix/{z}/{x}/{y}{r}.png?access-token=15IcrzrfcUzGjoEPHByJUZl9BP5KL0eCqCUBvNXbqbkfEUPKwewonYHQX7NXx80B",attribution:'<a href="http://jawg.io" title="Tiles Courtesy of Jawg Maps" target="_blank">&copy; <b>Jawg</b>Maps</a> <a href="https://www.openstreetmap.org/copyright"> &copyOpenStreetMap</a>'}],zoom:13,path:"http://leafletjs.com/examples/custom-icons/leaf-green.png",center:[22.996,120.2],url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",iconAll:Object(c["icon"])({iconUrl:"marker.svg",iconSize:[50,50]}),iconBar:Object(c["icon"])({iconUrl:"barMarker.svg",iconSize:[50,50]}),iconNightView:Object(c["icon"])({iconUrl:"nightMarker.svg",iconSize:[50,50]}),iconDessert:Object(c["icon"])({iconUrl:"dessertMarker.svg",iconSize:[50,50]}),iconSnack:Object(c["icon"])({iconUrl:"snackMarker.svg",iconSize:[50,50]}),markers:[],barMarkers:[],shops:[],bars:[]}},methods:{getPoints:function(){var t=this,e="https://localhost:44333/api/ShopInfoes";this.$http.get(e).then((function(e){console.log(e),t.shops=e.data,t.shops.forEach((function(e){var s=e.ShopID,i=e.Name,a=Object(c["latLng"])(e.Latitude,e.Longitude),o=t.iconBar;"酒吧"===e.Type?o=t.iconBar:"咖啡甜點"===e.Type?o=t.iconDessert:"夜間景點"===e.Type?o=t.iconNightView:"小吃宵夜"===e.Type&&(o=t.iconSnack),t.markers.push({point:a,shopID:s,shopName:i,icon:o})}))})).catch((function(t){console.dir(t)}))}},mounted:function(){this.getPoints()}},f=b,v=s("2877"),g=Object(v["a"])(f,n,l,!1,null,null,null),y=g.exports,w=s("46a5"),C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("swiper",{attrs:{options:t.swiperOption}},t._l(t.shops,(function(e){return s("swiper-slide",{key:e.ShopID,staticClass:"rounded-5 border-primary border-2"},[e.Enable?s("div",{key:e.ShopID,staticClass:"mb-4"},[s("div",{staticClass:"card border-primary rounded-lg w-100 overflow-hidden"},[s("div",{staticClass:"position-relative"},[s("a",{staticClass:"card-icon bg-transparent lh-sm",attrs:{href:"#"}},[t.memberFavorites.includes(e.ShopID)?s("span",{staticClass:"card-icon-istrue material-icons",on:{click:function(s){return s.preventDefault(),t.removeFavorite(e.ShopID)}}},[t._v(" favorite ")]):s("span",{staticClass:"material-icons",on:{click:function(s){return s.preventDefault(),t.addFavorite(e.ShopID)}}},[t._v(" favorite ")])]),s("p",{staticClass:"card-browse"},[s("span",{staticClass:"material-icons me-2"},[t._v(" visibility ")]),s("span",[t._v(t._s(e.Click))])]),s("div",{staticClass:"card-img bg-primary",style:{backgroundImage:"url("+e.Image1+")"}})]),s("div",{staticClass:"card-body"},[s("h5",{staticClass:"card-title fs-5 fw-bold d-flex align-items-center"},[t._v(" "+t._s(e.Name)+" ")]),s("div",{staticClass:"mb-3"},t._l(e.tags,(function(e){return s("span",{key:e,staticClass:"fs-7 fw-light badge bg-info me-1 lh-sm"},[t._v(t._s(e))])})),0),s("ul",{staticClass:"list-unstyled"},[s("li",[t._v("地址："+t._s(e.Address))]),s("li",[t._v("低消："+t._s(e.Min))])])]),s("div",{staticClass:"card-footer bg-transparent border-0"},[s("div",{staticClass:"d-flex"},[s("a",{staticClass:"btn btn-outline-info bg-transparnt d-flex align-items-center lh-base me-3",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.addRoulette(e.ShopID,e.Name)}}},[s("span",{staticClass:"material-icons fs-6 me-1"},[t._v("add")]),t._v("加入輪盤 ")]),s("a",{staticClass:"btn btn-outline-primary bg-transparnt d-flex align-items-center lh-base",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.openRouteModal(e.ShopID)}}},[s("span",{staticClass:"material-icons fs-6 me-1"},[t._v("add")]),t._v("加入行程 ")])])]),s("div",{staticClass:"card-footer bg-primary"},[s("router-link",{staticClass:"fs-4 text-center text-dark",attrs:{to:"/shops/shop/"+e.ShopID}},[t._v("查看更多")])],1)])]):t._e()])})),1)],1)},_=[],x=(s("4de4"),s("1276"),s("caad"),s("2532"),s("a9e3"),s("99af"),s("a434"),s("b64b"),s("7212")),k=(s("a7a3"),{props:["memberId"],components:{Swiper:x["Swiper"],SwiperSlide:x["SwiperSlide"]},data:function(){return{swiperOption:{slidesPerView:3,spaceBetween:30,autoplay:{delay:3e3},breakpoints:{320:{slidesPerView:1,spaceBetween:20},768:{slidesPerView:2,spaceBetween:30},992:{slidesPerView:3,spaceBetween:30}}},isDisabled:!1,shops:[],memberFavorites:[],memberRoutes:[],memberRouteTitles:[],shopId:0,routeArr:[]}},inject:["emitter"],methods:{getShops:function(){var t=this,e="https://localhost:44333/api/ShopInfoes";this.$http.get(e).then((function(e){t.shops=e.data.filter((function(t){return t.Click>10})),t.shops.forEach((function(e,s){t.shops[s].tags=e.TagIds.split(","),t.getShopScore(e.ShopID,s)}))})).catch((function(t){console.log(t)}))},getShopScore:function(t,e){var s=this,i="https://localhost:44333/api/shopreviews/score/".concat(t);this.$http.get(i).then((function(t){s.shops[e].score=t.data})).catch((function(t){s.shops[e].score=t.response.data.Message,console.dir(t)}))},getMemberFavorites:function(){var t=this,e="https://localhost:44333/api/MemberFavorites/".concat(this.memberId);this.$http.get(e).then((function(e){e.data.forEach((function(e){t.memberFavorites.includes(e.ShopID)||t.memberFavorites.push(e.ShopID)}))})).catch((function(t){console.dir(t)}))},getMember:function(){var t=document.cookie.replace(/(?:(?:^|.*;\s*)memberID\s*=\s*([^;]*).*$)|^.*$/,"$1");this.memberID=Number(t)},addFavorite:function(t){var e=this,s="https://localhost:44333/api/MemberFavorites",i={MemberID:this.memberId,ShopID:t};this.$http.post(s,i).then((function(){e.memberFavorites.includes(t)||(e.memberFavorites.push(t),e.getMemberFavorites(),e.emitter.emit("push-message",{style:"success",title:"已加入我的最愛"}))})).catch((function(t){console.dir(t)}))},removeFavorite:function(t){var e=this,s="https://localhost:44333/api/MemberFavorites/".concat(this.memberID,"/").concat(t);this.$http.delete(s).then((function(){e.memberFavorites.filter((function(s,i){(s==t||e.memberFavorites.includes(s.ShopID))&&e.memberFavorites.splice(i,1)})),e.getMemberFavorites(),e.emitter.emit("push-message",{style:"primary",title:"已從我的最愛中移除"})})).catch((function(t){console.dir(t)}))},addRoulette:function(t,e){localStorage.length>=12?alert("最多只能加入 12 個輪盤項目"):this.routeArr.includes("".concat(t))?this.emitter.emit("push-message",{style:"primary",title:"此店家已經有囉"}):(this.emitter.emit("push-message",{style:"success",title:"已加入隨機輪盤"}),localStorage.setItem(t,e),this.routeArr=Object.keys(localStorage))},openRouteModal:function(t){this.shopId=t,this.$emit("open-modal",this.shopId),this.memberID||(alert("請先登入"),this.$router.push("/memberlogin"))},getRoutes:function(){var t=this;this.memberRouteTitles=[];var e="https://localhost:44333/api/Routes/".concat(this.memberID);this.$http.get(e).then((function(e){t.memberRoutes=e.data,t.memberRoutes.forEach((function(e){t.memberRouteTitles.push({title:e.Title,routeId:e.RouteID})}))})).catch((function(t){console.log(t)}))}},mounted:function(){this.routeArr=Object.keys(localStorage),this.getShops(),this.getMember(),this.getMemberFavorites(),setTimeout((function(){}),1e3)}}),M=k,I=(s("d04e"),Object(v["a"])(M,C,_,!1,null,null,null)),S=I.exports,D=s("ac2a"),$={data:function(){return{isDisabled:!1,isMember:!1,memberName:"",review:{MemberID:0,Type:"",RContent:""},memberRoutes:[],memberRouteTitles:[],isLoading:!0,loader:{width:150,height:150,color:"#fff",lockScroll:!0,isFullPage:!0},shopId:0}},inject:["emitter"],components:{FrontNavbar:o["a"],FrontFooter:r["a"],LeafletComponent:y,Swiper:S,Roulette:w["a"],RouteModal:D["a"]},methods:{openRouletteModal:function(){this.$refs.modal.getPoints(),this.$refs.modal.init(),this.$refs.modal.drawRouletteWheel(),this.$refs.modal.openModal()},getMemberInfo:function(){var t=this;this.isLoading=!0;var e="https://localhost:44333/api/MemberInfoes1/".concat(this.review.MemberID);this.$http.get(e).then((function(e){t.memberName=e.data[0].Name})).catch((function(t){console.dir(t)}))},addWebsiteReview:function(){var t=this;this.isDisabled=!0;var e="https://localhost:44333/api/websitereview";this.$http.post(e,this.review).then((function(){t.review.Type="",t.review.RContent="",t.emitter.emit("push-message",{style:"success",title:"已送出，感謝您的留言"}),t.isDisabled=!1})).catch((function(t){console.dir(t)}))},gerMember:function(){var t=document.cookie.replace(/(?:(?:^|.*;\s*)memberToken\s*=\s*([^;]*).*$)|^.*$/,"$1");"true"===t?(this.isMember=!0,this.review.MemberID=document.cookie.replace(/(?:(?:^|.*;\s*)memberID\s*=\s*([^;]*).*$)|^.*$/,"$1"),this.getMemberInfo()):this.isMember=!1},openRouteModal:function(t){this.shopId=t,this.$refs.routeModal.openModal(),this.review.MemberID||(alert("請先登入"),this.$router.push("/memberlogin"))},getRoutes:function(){var t=this;this.memberRouteTitles=[];var e="https://localhost:44333/api/Routes/".concat(this.review.MemberID);this.$http.get(e).then((function(e){t.memberRoutes=e.data,t.memberRoutes.forEach((function(e){t.memberRouteTitles.push({title:e.Title,routeId:e.RouteID})}))})).catch((function(t){console.log(t)}))}},mounted:function(){var t=this;this.gerMember(),this.getRoutes(),setTimeout((function(){t.isLoading=!1}),1e3)}},R=$,j=(s("7390"),Object(v["a"])(R,i,a,!1,null,"600d2f05",null));e["default"]=j.exports},bbec:function(t,e,s){"use strict";s("eb5c")},bdfd:function(t,e,s){},be04:function(t,e,s){},cb29:function(t,e,s){var i=s("23e7"),a=s("81d5"),o=s("44d2");i({target:"Array",proto:!0},{fill:a}),o("fill")},d04e:function(t,e,s){"use strict";s("1971")},d08d:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("footer",{staticClass:"footer"},[i("div",{staticClass:"container-fuild bg-dark py-5"},[i("div",{staticClass:"container text-center"},[i("router-link",{staticClass:"text-white h4 link-hover-opacity mb-3",attrs:{to:"/"}},[i("img",{staticClass:"logoImg",attrs:{src:s("e347"),alt:""}})]),t._m(0),i("p",{staticClass:"text-white mb-3 mt-3"},[t._v("© 2022 LOGO All Rights Reserved.")]),i("router-link",{staticClass:"text-white fs-6",attrs:{to:"/adminLogin"}},[t._v("進入後台")])],1)])])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"d-flex justify-content-center list-unstyled"},[s("li",[s("a",{staticClass:"link-hover-opacity text-white px-3 py-2 border-1 border-end",attrs:{href:"#"}},[t._v("facebook")])]),s("li",[s("a",{staticClass:"link-hover-opacity text-white px-3 py-2",attrs:{href:"#"}},[t._v("instagram")])])])}],o=(s("bbec"),s("2877")),r={},n=Object(o["a"])(r,i,a,!1,null,"4f57bbf8",null);e["a"]=n.exports},e103:function(t,e,s){"use strict";s("be04")},e347:function(t,e,s){t.exports=s.p+"img/logo.b48cc9ee.svg"},eb5c:function(t,e,s){}}]);
//# sourceMappingURL=chunk-d801df74.17001a43.js.map