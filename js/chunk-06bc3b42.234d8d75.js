(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06bc3b42"],{"0fa5":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fulid"},[s("loading",{attrs:{active:t.isLoading,loader:"spinner",color:t.loader.color,width:t.loader.width,height:t.loader.height,"lock-scroll":t.loader.lockScroll,"is-full-page":t.loader.isFullPage}}),"all"==t.shopType?s("div",{staticClass:"banner d-flex justify-content-center align-items-end mb-6"},[t._m(0)]):t._e(),"bar"==t.shopType?s("div",{staticClass:"banner banner-bar d-flex align-items-end mb-6"},[t._m(1)]):t._e(),"dessert"==t.shopType?s("div",{staticClass:"banner-dessert banner d-flex align-items-end mb-6"},[t._m(2)]):t._e(),"viewpoint"==t.shopType?s("div",{staticClass:"banner-viewpoint banner d-flex align-items-end mb-6"},[t._m(3)]):t._e(),"snack"==t.shopType?s("div",{staticClass:"banner-snack banner d-flex align-items-end mb-6"},[t._m(4)]):t._e(),s("div",{staticClass:"container"},[s("h2",{staticClass:"text-white mb-3"},["all"==t.shopType?s("span",[t._v("所有店家")]):"bar"==t.shopType?s("span",[t._v("精選酒吧")]):"dessert"==t.shopType?s("span",[t._v("精選甜點")]):"snack"==t.shopType?s("span",[t._v("精選宵夜")]):"viewpoint"==t.shopType?s("span",[t._v("精選夜景")]):t._e(),s("button",{staticClass:"btn btn-primary btn-sm ms-3",on:{click:t.showScore}},[t.isShowScore?s("span",[t._v("關閉店家評分")]):s("span",[t._v("開啟店家評分")])])]),s("div",{staticClass:"row"},[t._l(t.shops,(function(e){return[e.Enable?s("div",{key:e.ShopID,staticClass:"col-12 col-md-6 col-lg-4 mb-4"},[s("div",{staticClass:"card border-primary rounded-lg w-100 overflow-hidden"},[s("div",{staticClass:"position-relative"},[s("a",{staticClass:"card-icon bg-transparent lh-sm",attrs:{href:"#"}},[t.memberFavorites.includes(e.ShopID)?s("span",{staticClass:"card-icon-istrue material-icons",on:{click:function(s){return s.preventDefault(),t.removeFavorite(e.ShopID)}}},[t._v(" favorite ")]):s("span",{staticClass:"material-icons",on:{click:function(s){return s.preventDefault(),t.addFavorite(e.ShopID)}}},[t._v(" favorite ")])]),s("p",{staticClass:"card-browse"},[s("span",{staticClass:"material-icons me-2"},[t._v(" visibility ")]),s("span",[t._v(t._s(e.Click))])]),s("div",{staticClass:"card-img bg-primary",style:{backgroundImage:"url("+e.Image1+")"}})]),s("div",{staticClass:"card-body"},[s("div",{staticClass:"fs-7 mb-1 d-flex justify-content-between align-items-center"},[t.isShowScore?s("div",{staticClass:"d-flex align-items-center"},[s("span",{staticClass:"material-icons text-primary"},[t._v("star")]),s("span",{staticClass:"ms-2"},[t._v(t._s(e.score))])]):t._e()]),s("h5",{staticClass:"card-title fs-5 fw-bold d-flex align-items-center"},[t._v(" "+t._s(e.Name)+" ")]),s("div",{staticClass:"mb-3"},t._l(e.tags,(function(e){return s("span",{key:e,staticClass:"fs-7 fw-light badge bg-info me-1 lh-sm"},[t._v(t._s(e))])})),0),s("ul",{staticClass:"list-unstyled"},[s("li",[t._v("地址："+t._s(e.Address))]),s("li",[t._v("低消："+t._s(e.Min))])])]),s("div",{staticClass:"card-footer bg-transparent border-0"},[s("div",{staticClass:"d-flex"},[s("button",{staticClass:"btn btn-outline-info bg-transparnt d-flex align-items-center lh-base me-3",attrs:{type:"button",disabled:t.isDisabled},on:{click:function(s){return s.preventDefault(),t.addRoulette(e.ShopID,e.Name)}}},[s("span",{staticClass:"material-icons fs-6 me-1"},[t._v("add")]),t._v("加入輪盤 ")]),s("a",{staticClass:"btn btn-outline-primary bg-transparnt d-flex align-items-center lh-base",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.openRouteModal(e.ShopID)}}},[s("span",{staticClass:"material-icons fs-6 me-1"},[t._v("add")]),t._v("加入行程 ")])])]),s("div",{staticClass:"card-footer bg-primary"},[s("router-link",{staticClass:"fs-4 text-center text-dark",attrs:{to:"shop/"+e.ShopID}},[t._v("查看更多")])],1)])]):t._e()]}))],2)]),s("RouteModal",{ref:"modal",attrs:{routes:t.memberRoutes,titles:t.memberRouteTitles,"shop-id":t.shopId},on:{"get-routes":t.getRoutes}})],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container mb-4"},[s("h1",{staticClass:"text-primary fw-bold"},[t._v("台南的夜生活都在這裡")]),s("p",{staticClass:"fs-3 text-primary"},[t._v("夜來夜好玩")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container mb-4"},[s("h1",{staticClass:"text-primary fw-bold"},[t._v("找尋優質的酒吧")]),s("p",{staticClass:"fs-3 text-primary"},[t._v("今朝有酒，今朝醉")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container mb-4"},[s("h1",{staticClass:"text-primary fw-bold"},[t._v("深夜裡的甜點店")]),s("p",{staticClass:"fs-3 text-primary"},[t._v("來台南當螞蟻人")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container mb-4"},[s("h1",{staticClass:"text-primary fw-bold"},[t._v("夜間景點")]),s("p",{staticClass:"fs-3 text-primary"},[t._v("慢下來，一起欣賞台南夜景")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container mb-4"},[s("h1",{staticClass:"text-primary fw-bold"},[t._v("宵夜小吃")]),s("p",{staticClass:"fs-3 text-primary"},[t._v("快來當台南小吃霸主")])])}],r=(s("ac1f"),s("5319"),s("a9e3"),s("d3b7"),s("159b"),s("caad"),s("2532"),s("99af"),s("4de4"),s("a434"),s("b64b"),s("ac2a")),o={props:["allShops","shopType"],components:{RouteModal:r["a"]},data:function(){return{shops:[],isDisabled:!1,isLoading:!1,loader:{width:150,height:150,color:"#fff",lockScroll:!0,isFullPage:!1},memberID:0,memberRoutes:[],memberRouteTitles:[],memberFavorites:[],shopId:0,isShowScore:!1,routeArr:[]}},inject:["emitter"],methods:{getMember:function(){var t=document.cookie.replace(/(?:(?:^|.*;\s*)memberID\s*=\s*([^;]*).*$)|^.*$/,"$1");this.memberID=Number(t)},getMemberFavorites:function(){var t=this,e="https://localhost:44333/api/MemberFavorites/".concat(this.memberID);this.$http.get(e).then((function(e){e.data.forEach((function(e){t.memberFavorites.includes(e.ShopID)||t.memberFavorites.push(e.ShopID)}))})).catch((function(t){console.dir(t)}))},addFavorite:function(t){var e=this;if(this.memberID){var s="https://localhost:44333/api/MemberFavorites",i={MemberID:this.memberID,ShopID:t};this.$http.post(s,i).then((function(){e.memberFavorites.includes(t)||(e.memberFavorites.push(t),e.getMemberFavorites(),e.emitter.emit("push-message",{style:"success",title:"已加入我的最愛"}))})).catch((function(t){console.dir(t)}))}else this.$swal.fire({icon:"info",title:"請先登入",showCancelButton:!0,confirmButtonText:"登入",cancelButtonText:"關閉"}).then((function(t){t.isConfirmed&&e.$router.push("/memberlogin")}))},removeFavorite:function(t){var e=this,s="https://localhost:44333/api/MemberFavorites/".concat(this.memberID,"/").concat(t);this.$http.delete(s).then((function(){e.memberFavorites.filter((function(s,i){(s==t||e.memberFavorites.includes(s.ShopID))&&e.memberFavorites.splice(i,1)})),e.getMemberFavorites(),e.emitter.emit("push-message",{style:"primary",title:"已從我的最愛中移除"})})).catch((function(t){console.dir(t)}))},addRoulette:function(t,e){this.routeArr=Object.keys(localStorage),this.isDisabled=!0,localStorage.length>=12?this.showAlert():this.routeArr.includes("".concat(t))?this.emitter.emit("push-message",{style:"primary",title:"此店家已經有囉"}):(this.emitter.emit("push-message",{style:"success",title:"已加入隨機輪盤"}),localStorage.setItem(t,e),this.routeArr=Object.keys(localStorage)),this.isDisabled=!1},openRouteModal:function(t){var e=this;this.shopId=t,this.memberID?this.$refs.modal.openModal():this.$swal.fire({icon:"info",title:"請先登入",showCancelButton:!0,confirmButtonText:"登入",cancelButtonText:"關閉"}).then((function(t){t.isConfirmed&&e.$router.push("/memberlogin")}))},getRoutes:function(){var t=this;this.memberRouteTitles=[];var e="https://localhost:44333/api/Routes/".concat(this.memberID);this.$http.get(e).then((function(e){t.memberRoutes=e.data,t.memberRoutes.forEach((function(e){t.memberRouteTitles.push({title:e.Title,routeId:e.RouteID})}))})).catch((function(t){console.log(t)}))},showScore:function(){this.isShowScore=!this.isShowScore},showAlert:function(){this.$swal.fire({icon:"info",title:"最多只能加入 12 個項目"})}},watch:{allShops:function(){this.shops=this.allShops}},mounted:function(){var t=this;setTimeout((function(){t.isLoading=!1}),1500),this.getMember(),this.getMemberFavorites(),this.getRoutes()}},n=o,l=(s("a6b9"),s("2877")),c=Object(l["a"])(n,i,a,!1,null,null,null);e["default"]=c.exports},1262:function(t,e,s){},a6b9:function(t,e,s){"use strict";s("1262")}}]);
//# sourceMappingURL=chunk-06bc3b42.234d8d75.js.map