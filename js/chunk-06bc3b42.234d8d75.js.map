{"version":3,"sources":["webpack:///./src/views/Shop.vue?5e52","webpack:///src/views/Shop.vue","webpack:///./src/views/Shop.vue?1edc","webpack:///./src/views/Shop.vue","webpack:///./src/views/Shop.vue?0744"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","isLoading","loader","color","width","height","lockScroll","isFullPage","shopType","_m","_e","_v","on","showScore","isShowScore","_l","shop","key","ShopID","memberFavorites","includes","$event","preventDefault","removeFavorite","addFavorite","_s","Click","style","backgroundImage","score","Name","tag","Address","Min","isDisabled","addRoulette","openRouteModal","ref","memberRoutes","memberRouteTitles","shopId","getRoutes","staticRenderFns","props","components","RouteModal","data","shops","memberID","routeArr","inject","methods","getMember","Number","member","getMemberFavorites","$http","get","api","then","res","catch","console","MemberID","post","obj","title","$swal","fire","icon","showCancelButton","confirmButtonText","cancelButtonText","delete","id","name","Object","keys","localStorage","length","showAlert","emitter","emit","$refs","modal","openModal","routeId","watch","allShops","mounted","setTimeout","component"],"mappings":"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","file":"js/chunk-06bc3b42.234d8d75.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container-fulid\"},[_c('loading',{attrs:{\"active\":_vm.isLoading,\"loader\":\"spinner\",\"color\":_vm.loader.color,\"width\":_vm.loader.width,\"height\":_vm.loader.height,\"lock-scroll\":_vm.loader.lockScroll,\"is-full-page\":_vm.loader.isFullPage}}),(_vm.shopType == 'all')?_c('div',{staticClass:\"banner d-flex justify-content-center align-items-end mb-6\"},[_vm._m(0)]):_vm._e(),(_vm.shopType == 'bar')?_c('div',{staticClass:\"banner banner-bar d-flex align-items-end mb-6\"},[_vm._m(1)]):_vm._e(),(_vm.shopType == 'dessert')?_c('div',{staticClass:\"banner-dessert banner d-flex align-items-end mb-6\"},[_vm._m(2)]):_vm._e(),(_vm.shopType == 'viewpoint')?_c('div',{staticClass:\"banner-viewpoint banner d-flex align-items-end mb-6\"},[_vm._m(3)]):_vm._e(),(_vm.shopType == 'snack')?_c('div',{staticClass:\"banner-snack banner d-flex align-items-end mb-6\"},[_vm._m(4)]):_vm._e(),_c('div',{staticClass:\"container\"},[_c('h2',{staticClass:\"text-white mb-3\"},[(_vm.shopType == 'all')?_c('span',[_vm._v(\"所有店家\")]):(_vm.shopType == 'bar')?_c('span',[_vm._v(\"精選酒吧\")]):(_vm.shopType == 'dessert')?_c('span',[_vm._v(\"精選甜點\")]):(_vm.shopType == 'snack')?_c('span',[_vm._v(\"精選宵夜\")]):(_vm.shopType == 'viewpoint')?_c('span',[_vm._v(\"精選夜景\")]):_vm._e(),_c('button',{staticClass:\"btn btn-primary btn-sm ms-3\",on:{\"click\":_vm.showScore}},[(!_vm.isShowScore)?_c('span',[_vm._v(\"開啟店家評分\")]):_c('span',[_vm._v(\"關閉店家評分\")])])]),_c('div',{staticClass:\"row\"},[_vm._l((_vm.shops),function(shop){return [(shop.Enable)?_c('div',{key:shop.ShopID,staticClass:\"col-12 col-md-6 col-lg-4 mb-4\"},[_c('div',{staticClass:\"card border-primary rounded-lg w-100 overflow-hidden\"},[_c('div',{staticClass:\"position-relative\"},[_c('a',{staticClass:\"card-icon bg-transparent lh-sm\",attrs:{\"href\":\"#\"}},[(_vm.memberFavorites.includes(shop.ShopID))?_c('span',{staticClass:\"card-icon-istrue material-icons\",on:{\"click\":function($event){$event.preventDefault();return _vm.removeFavorite(shop.ShopID)}}},[_vm._v(\" favorite \")]):_c('span',{staticClass:\"material-icons\",on:{\"click\":function($event){$event.preventDefault();return _vm.addFavorite(shop.ShopID)}}},[_vm._v(\" favorite \")])]),_c('p',{staticClass:\"card-browse\"},[_c('span',{staticClass:\"material-icons me-2\"},[_vm._v(\" visibility \")]),_c('span',[_vm._v(_vm._s(shop.Click))])]),_c('div',{staticClass:\"card-img bg-primary\",style:({ backgroundImage: (\"url(\" + (shop.Image1) + \")\") })})]),_c('div',{staticClass:\"card-body\"},[_c('div',{staticClass:\"fs-7 mb-1 d-flex justify-content-between align-items-center\"},[(_vm.isShowScore)?_c('div',{staticClass:\"d-flex align-items-center\"},[_c('span',{staticClass:\"material-icons text-primary\"},[_vm._v(\"star\")]),_c('span',{staticClass:\"ms-2\"},[_vm._v(_vm._s(shop.score))])]):_vm._e()]),_c('h5',{staticClass:\"card-title fs-5 fw-bold d-flex align-items-center\"},[_vm._v(\" \"+_vm._s(shop.Name)+\" \")]),_c('div',{staticClass:\"mb-3\"},_vm._l((shop.tags),function(tag){return _c('span',{key:tag,staticClass:\"fs-7 fw-light badge bg-info me-1 lh-sm\"},[_vm._v(_vm._s(tag))])}),0),_c('ul',{staticClass:\"list-unstyled\"},[_c('li',[_vm._v(\"地址：\"+_vm._s(shop.Address))]),_c('li',[_vm._v(\"低消：\"+_vm._s(shop.Min))])])]),_c('div',{staticClass:\"card-footer bg-transparent border-0\"},[_c('div',{staticClass:\"d-flex\"},[_c('button',{staticClass:\"btn btn-outline-info bg-transparnt d-flex align-items-center lh-base me-3\",attrs:{\"type\":\"button\",\"disabled\":_vm.isDisabled},on:{\"click\":function($event){$event.preventDefault();return _vm.addRoulette(shop.ShopID, shop.Name)}}},[_c('span',{staticClass:\"material-icons fs-6 me-1\"},[_vm._v(\"add\")]),_vm._v(\"加入輪盤 \")]),_c('a',{staticClass:\"btn btn-outline-primary bg-transparnt d-flex align-items-center lh-base\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.openRouteModal(shop.ShopID)}}},[_c('span',{staticClass:\"material-icons fs-6 me-1\"},[_vm._v(\"add\")]),_vm._v(\"加入行程 \")])])]),_c('div',{staticClass:\"card-footer bg-primary\"},[_c('router-link',{staticClass:\"fs-4 text-center text-dark\",attrs:{\"to\":(\"shop/\" + (shop.ShopID))}},[_vm._v(\"查看更多\")])],1)])]):_vm._e()]})],2)]),_c('RouteModal',{ref:\"modal\",attrs:{\"routes\":_vm.memberRoutes,\"titles\":_vm.memberRouteTitles,\"shop-id\":_vm.shopId},on:{\"get-routes\":_vm.getRoutes}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container mb-4\"},[_c('h1',{staticClass:\"text-primary fw-bold\"},[_vm._v(\"台南的夜生活都在這裡\")]),_c('p',{staticClass:\"fs-3 text-primary\"},[_vm._v(\"夜來夜好玩\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container mb-4\"},[_c('h1',{staticClass:\"text-primary fw-bold\"},[_vm._v(\"找尋優質的酒吧\")]),_c('p',{staticClass:\"fs-3 text-primary\"},[_vm._v(\"今朝有酒，今朝醉\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container mb-4\"},[_c('h1',{staticClass:\"text-primary fw-bold\"},[_vm._v(\"深夜裡的甜點店\")]),_c('p',{staticClass:\"fs-3 text-primary\"},[_vm._v(\"來台南當螞蟻人\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container mb-4\"},[_c('h1',{staticClass:\"text-primary fw-bold\"},[_vm._v(\"夜間景點\")]),_c('p',{staticClass:\"fs-3 text-primary\"},[_vm._v(\"慢下來，一起欣賞台南夜景\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container mb-4\"},[_c('h1',{staticClass:\"text-primary fw-bold\"},[_vm._v(\"宵夜小吃\")]),_c('p',{staticClass:\"fs-3 text-primary\"},[_vm._v(\"快來當台南小吃霸主\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container-fulid\">\r\n    <loading\r\n      :active=\"isLoading\"\r\n      loader=\"spinner\"\r\n      :color=\"loader.color\"\r\n      :width=\"loader.width\"\r\n      :height=\"loader.height\"\r\n      :lock-scroll=\"loader.lockScroll\"\r\n      :is-full-page=\"loader.isFullPage\"\r\n    >\r\n    </loading>\r\n    <div\r\n      class=\"banner d-flex justify-content-center align-items-end mb-6\"\r\n      v-if=\"shopType == 'all'\"\r\n    >\r\n      <div class=\"container mb-4\">\r\n        <h1 class=\"text-primary fw-bold\">台南的夜生活都在這裡</h1>\r\n        <p class=\"fs-3 text-primary\">夜來夜好玩</p>\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"banner banner-bar d-flex align-items-end mb-6\"\r\n      v-if=\"shopType == 'bar'\"\r\n    >\r\n      <div class=\"container mb-4\">\r\n        <h1 class=\"text-primary fw-bold\">找尋優質的酒吧</h1>\r\n        <p class=\"fs-3 text-primary\">今朝有酒，今朝醉</p>\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"banner-dessert banner d-flex align-items-end mb-6\"\r\n      v-if=\"shopType == 'dessert'\"\r\n    >\r\n      <div class=\"container mb-4\">\r\n        <h1 class=\"text-primary fw-bold\">深夜裡的甜點店</h1>\r\n        <p class=\"fs-3 text-primary\">來台南當螞蟻人</p>\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"banner-viewpoint banner d-flex align-items-end mb-6\"\r\n      v-if=\"shopType == 'viewpoint'\"\r\n    >\r\n      <div class=\"container mb-4\">\r\n        <h1 class=\"text-primary fw-bold\">夜間景點</h1>\r\n        <p class=\"fs-3 text-primary\">慢下來，一起欣賞台南夜景</p>\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"banner-snack banner d-flex align-items-end mb-6\"\r\n      v-if=\"shopType == 'snack'\"\r\n    >\r\n      <div class=\"container mb-4\">\r\n        <h1 class=\"text-primary fw-bold\">宵夜小吃</h1>\r\n        <p class=\"fs-3 text-primary\">快來當台南小吃霸主</p>\r\n      </div>\r\n    </div>\r\n    <div class=\"container\">\r\n      <h2 class=\"text-white mb-3\">\r\n        <span v-if=\"shopType == 'all'\">所有店家</span>\r\n        <span v-else-if=\"shopType == 'bar'\">精選酒吧</span>\r\n        <span v-else-if=\"shopType == 'dessert'\">精選甜點</span>\r\n        <span v-else-if=\"shopType == 'snack'\">精選宵夜</span>\r\n        <span v-else-if=\"shopType == 'viewpoint'\">精選夜景</span>\r\n        <button class=\"btn btn-primary btn-sm ms-3\" @click=\"showScore\">\r\n          <span v-if=\"!isShowScore\">開啟店家評分</span>\r\n          <span v-else>關閉店家評分</span>\r\n        </button>\r\n      </h2>\r\n      <div class=\"row\">\r\n        <template v-for=\"shop in shops\">\r\n          <div\r\n            class=\"col-12 col-md-6 col-lg-4 mb-4\"\r\n            v-if=\"shop.Enable\"\r\n            :key=\"shop.ShopID\"\r\n          >\r\n            <div class=\"card border-primary rounded-lg w-100 overflow-hidden\">\r\n              <div class=\"position-relative\">\r\n                <a href=\"#\" class=\"card-icon bg-transparent lh-sm\">\r\n                  <span\r\n                    class=\"card-icon-istrue material-icons\"\r\n                    v-if=\"memberFavorites.includes(shop.ShopID)\"\r\n                    @click.prevent=\"removeFavorite(shop.ShopID)\"\r\n                  >\r\n                    favorite\r\n                  </span>\r\n                  <span\r\n                    class=\"material-icons\"\r\n                    v-else\r\n                    @click.prevent=\"addFavorite(shop.ShopID)\"\r\n                  >\r\n                    favorite\r\n                  </span>\r\n                </a>\r\n\r\n                <p class=\"card-browse\">\r\n                  <span class=\"material-icons me-2\"> visibility </span>\r\n                  <span>{{ shop.Click }}</span>\r\n                </p>\r\n                <div\r\n                  class=\"card-img bg-primary\"\r\n                  :style=\"{ backgroundImage: `url(${shop.Image1})` }\"\r\n                ></div>\r\n              </div>\r\n              <div class=\"card-body\">\r\n                <div\r\n                  class=\"fs-7 mb-1 d-flex justify-content-between align-items-center\"\r\n                >\r\n                  <div class=\"d-flex align-items-center\" v-if=\"isShowScore\">\r\n                    <span class=\"material-icons text-primary\">star</span>\r\n                    <span class=\"ms-2\">{{ shop.score }}</span>\r\n                  </div>\r\n                </div>\r\n                <h5 class=\"card-title fs-5 fw-bold d-flex align-items-center\">\r\n                  {{ shop.Name }}\r\n                </h5>\r\n                <div class=\"mb-3\">\r\n                  <span\r\n                    class=\"fs-7 fw-light badge bg-info me-1 lh-sm\"\r\n                    v-for=\"tag in shop.tags\"\r\n                    :key=\"tag\"\r\n                    >{{ tag }}</span\r\n                  >\r\n                </div>\r\n\r\n                <ul class=\"list-unstyled\">\r\n                  <li>地址：{{ shop.Address }}</li>\r\n                  <li>低消：{{ shop.Min }}</li>\r\n                </ul>\r\n              </div>\r\n              <div class=\"card-footer bg-transparent border-0\">\r\n                <div class=\"d-flex\">\r\n                  <button\r\n                    type=\"button\"\r\n                    class=\"btn btn-outline-info bg-transparnt d-flex align-items-center lh-base me-3\"\r\n                    @click.prevent=\"addRoulette(shop.ShopID, shop.Name)\"\r\n                    :disabled=\"isDisabled\"\r\n                  >\r\n                    <span class=\"material-icons fs-6 me-1\">add</span>加入輪盤\r\n                  </button>\r\n                  <a\r\n                    href=\"#\"\r\n                    class=\"btn btn-outline-primary bg-transparnt d-flex align-items-center lh-base\"\r\n                    @click.prevent=\"openRouteModal(shop.ShopID)\"\r\n                  >\r\n                    <span class=\"material-icons fs-6 me-1\">add</span>加入行程\r\n                  </a>\r\n                </div>\r\n              </div>\r\n              <div class=\"card-footer bg-primary\">\r\n                <router-link\r\n                  :to=\"`shop/${shop.ShopID}`\"\r\n                  class=\"fs-4 text-center text-dark\"\r\n                  >查看更多</router-link\r\n                >\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </div>\r\n    </div>\r\n    <RouteModal\r\n      ref=\"modal\"\r\n      :routes=\"memberRoutes\"\r\n      :titles=\"memberRouteTitles\"\r\n      :shop-id=\"shopId\"\r\n      @get-routes=\"getRoutes\"\r\n    ></RouteModal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport RouteModal from \"../components/RouteModal.vue\";\r\n\r\nexport default {\r\n  props: [\"allShops\", \"shopType\"],\r\n  components: {\r\n    RouteModal,\r\n  },\r\n  data() {\r\n    return {\r\n      shops: [],\r\n      isDisabled: false,\r\n      isLoading: false,\r\n      loader: {\r\n        width: 150,\r\n        height: 150,\r\n        color: \"#fff\",\r\n        lockScroll: true,\r\n        isFullPage: false,\r\n      },\r\n      memberID: 0,\r\n      memberRoutes: [],\r\n      memberRouteTitles: [],\r\n      memberFavorites: [],\r\n      shopId: 0,\r\n      isShowScore: false,\r\n      routeArr: [],\r\n    };\r\n  },\r\n  inject: [\"emitter\"],\r\n  methods: {\r\n    getMember() {\r\n      let member = document.cookie.replace(\r\n        /(?:(?:^|.*;\\s*)memberID\\s*=\\s*([^;]*).*$)|^.*$/,\r\n        \"$1\"\r\n      );\r\n      this.memberID = Number(member);\r\n    },\r\n    getMemberFavorites() {\r\n      const api = `https://localhost:44333/api/MemberFavorites/${this.memberID}`;\r\n\r\n      this.$http\r\n        .get(api)\r\n        .then((res) => {\r\n          res.data.forEach((item) => {\r\n            if (!this.memberFavorites.includes(item.ShopID)) {\r\n              this.memberFavorites.push(item.ShopID);\r\n            } else {\r\n              return;\r\n            }\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          console.dir(err);\r\n        });\r\n    },\r\n    addFavorite(shopId) {\r\n      if (!this.memberID) {\r\n        // alert(\"請先登入\");\r\n        this.$swal\r\n          .fire({\r\n            icon: \"info\",\r\n            title: \"請先登入\",\r\n            showCancelButton: true,\r\n            confirmButtonText: \"登入\",\r\n            cancelButtonText: \"關閉\",\r\n          })\r\n          .then((result) => {\r\n            if (result.isConfirmed) {\r\n              this.$router.push(\"/memberlogin\");\r\n            }\r\n          });\r\n      } else {\r\n        const api = `https://localhost:44333/api/MemberFavorites`;\r\n        let obj = {\r\n          MemberID: this.memberID,\r\n          ShopID: shopId,\r\n        };\r\n        this.$http\r\n          .post(api, obj)\r\n          .then(() => {\r\n            if (!this.memberFavorites.includes(shopId)) {\r\n              this.memberFavorites.push(shopId);\r\n            } else {\r\n              return;\r\n            }\r\n            this.getMemberFavorites();\r\n            this.emitter.emit(\"push-message\", {\r\n              style: \"success\",\r\n              title: \"已加入我的最愛\",\r\n            });\r\n          })\r\n          .catch((err) => {\r\n            console.dir(err);\r\n          });\r\n      }\r\n    },\r\n    removeFavorite(shopId) {\r\n      const api = `https://localhost:44333/api/MemberFavorites/${this.memberID}/${shopId}`;\r\n\r\n      this.$http\r\n        .delete(api)\r\n        .then(() => {\r\n          this.memberFavorites.filter((item, index) => {\r\n            if (item == shopId || this.memberFavorites.includes(item.ShopID)) {\r\n              this.memberFavorites.splice(index, 1);\r\n            }\r\n          });\r\n          this.getMemberFavorites();\r\n          this.emitter.emit(\"push-message\", {\r\n            style: \"primary\",\r\n            title: \"已從我的最愛中移除\",\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          console.dir(err);\r\n        });\r\n    },\r\n    addRoulette(id, name) {\r\n      this.routeArr = Object.keys(localStorage);\r\n      this.isDisabled = true;\r\n      if (localStorage.length >= 12) {\r\n        this.showAlert();\r\n      } else {\r\n        if (this.routeArr.includes(`${id}`)) {\r\n          this.emitter.emit(\"push-message\", {\r\n            style: \"primary\",\r\n            title: \"此店家已經有囉\",\r\n          });\r\n        } else {\r\n          this.emitter.emit(\"push-message\", {\r\n            style: \"success\",\r\n            title: \"已加入隨機輪盤\",\r\n          });\r\n          localStorage.setItem(id, name);\r\n          this.routeArr = Object.keys(localStorage);\r\n        }\r\n      }\r\n      this.isDisabled = false;\r\n    },\r\n    openRouteModal(shopId) {\r\n      this.shopId = shopId;\r\n      if (!this.memberID) {\r\n        // alert(\"請先登入\");\r\n        this.$swal\r\n          .fire({\r\n            icon: \"info\",\r\n            title: \"請先登入\",\r\n            showCancelButton: true,\r\n            confirmButtonText: \"登入\",\r\n            cancelButtonText: \"關閉\",\r\n          })\r\n          .then((result) => {\r\n            if (result.isConfirmed) {\r\n              this.$router.push(\"/memberlogin\");\r\n            }\r\n          });\r\n      } else {\r\n        this.$refs.modal.openModal();\r\n      }\r\n    },\r\n    getRoutes() {\r\n      this.memberRouteTitles = [];\r\n      const api = `https://localhost:44333/api/Routes/${this.memberID}`;\r\n\r\n      this.$http\r\n        .get(api)\r\n        .then((res) => {\r\n          this.memberRoutes = res.data;\r\n          this.memberRoutes.forEach((item) => {\r\n            this.memberRouteTitles.push({\r\n              title: item.Title,\r\n              routeId: item.RouteID,\r\n            });\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    showScore() {\r\n      this.isShowScore = !this.isShowScore;\r\n    },\r\n    showAlert() {\r\n      this.$swal.fire({\r\n        icon: \"info\",\r\n        title: \"最多只能加入 12 個項目\",\r\n      });\r\n    },\r\n  },\r\n  watch: {\r\n    allShops() {\r\n      this.shops = this.allShops;\r\n    },\r\n  },\r\n  mounted() {\r\n    setTimeout(() => {\r\n      this.isLoading = false;\r\n    }, 1500);\r\n    this.getMember();\r\n    this.getMemberFavorites();\r\n    this.getRoutes();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import \"../assets/stylesheet/layout/card\";\r\n\r\n.swal2-styled.swal2-confirm {\r\n  background-color: #1c6e8c !important;\r\n  &:focus {\r\n    box-shadow: 0 0 0 3px rgba($color: #1c6e8c, $alpha: 0.5) !important;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Shop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Shop.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Shop.vue?vue&type=template&id=3aad0057&\"\nimport script from \"./Shop.vue?vue&type=script&lang=js&\"\nexport * from \"./Shop.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Shop.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Shop.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}